#!/bin/bash

hostname=$(hostname)

#echo $hostname
#if [ "$hostname" = "unbK40.localdomain" ];then
#  nvidia-smi 
if [ "$hostname" = "rocks-test.local" ];then
  echo $"
  
  +-----------------------------------------------------------------------------+
  |                                                                             |
  |                               NODE 0-0                                      |
  |                                                                             |
  +-----------------------------------------------------------------------------+ "  
  ssh -t compute-0-0 'nvidia-smi' 
  echo $"
  
  +-----------------------------------------------------------------------------+
  |                                                                             |
  |                               NODE 0-1                                      |
  |                                                                             |
  +-----------------------------------------------------------------------------+ "  
  ssh -t compute-0-1 'nvidia-smi' 
  echo $"
  
  +-----------------------------------------------------------------------------+
  |                                                                             |
  |                               NODE 0-2                                      |
  |                                                                             |
  +-----------------------------------------------------------------------------+ "  
  ssh -t compute-0-2 'nvidia-smi' 
  echo $"
  
  +-----------------------------------------------------------------------------+
  |                                                                             |
  |                               NODE 0-3                                      |
  |                                                                             |
  +-----------------------------------------------------------------------------+ "  
  ssh -t compute-0-3 'nvidia-smi' 
  echo $"
  
  +-----------------------------------------------------------------------------+
  |                                                                             |
  |                               NODE 0-4                                      |
  |                                                                             |
  +-----------------------------------------------------------------------------+ "  
  ssh -t compute-0-4 'nvidia-smi'
elif [ "$hostname" = "compute-0-1.local" ]||[ "$hostname" = "compute-0-2.local" ]||[ "$hostname" = "compute-0-2.local" ]||[ "$hostname" = "compute-0-3.local" ]||[ "$hostname" = "compute-0-4.local" ];then
  ssh -t rocks-test.local 'topall' 
else
  nvidia-smi
fi

